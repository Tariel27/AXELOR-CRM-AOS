<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_7.1.xsd">

    <form name="pbp.project-form" title="Project" model="com.axelor.apps.project.db.Project"
          onLoad="action-project-on-load-group" onNew="action-project-group-on-new-project,pbp.project.o-n.set-default-value.a-a"
          onSave="action-project-method-check-resource-availibility">
        <menubar>
            <menu name="taskMenu" title="Tasks" showTitle="true" icon="fa-tasks">
                <item name="myOpenTasks" title="My open tasks"
                      action="save,action-project-method-my-open-tasks" showIf="id &amp;&amp; isShowStatus"/>
                <item name="tasksCreatedByMe" title="Tasks created by me"
                      action="save,action-project-method-my-tasks" showIf="id &amp;&amp; isShowStatus"/>
                <item name="allOpenTasks" title="All open tasks"
                      action="save,action-project-method-all-open-tasks" showIf="id"/>
                <item name="allTasks" title="All tasks" action="save,action-project-method-all-tasks"
                      showIf="id"/>
            </menu>
            <menu name="projectToolsMenu" title="Tools" showTitle="true" icon="fa-wrench">
                <item name="ganttItem" title="Gantt" showIf="id &amp;&amp; isShowGantt"
                      action="save,action-project-open-gantt"/>
                <item name="bookResourceItem" title="Book resource"
                      if=" __config__.app.getApp('project')?.resourceManagement"
                      action="save,action-project-book-resource"/>
                <item name="taskEditorItem" action="save,action-project-open-task-editor"
                      title="Task editor"/>
                <item name="wiki" title="Wiki" action="save,project.wiki.all" showIf="id"/>
                <item name="topic" title="Topic" action="save,project.topic.all"
                      showIf="id &amp;&amp; isShowTopic"/>
                <item name="perStatusKanban" title="Per status kanban"
                      action="save,action-project-method-view-per-status-kanban"
                      showIf="id &amp;&amp; isShowKanbanPerStatus"/>
                <item name="perStatusCalendar" title="Per status calendar"
                      action="save,action-project-view-per-status-calendar"
                      showIf="id &amp;&amp; isShowCalendarPerStatus"/>
                <item name="perSectionKanban" title="Per section kanban"
                      action="save,action-project-view-per-section-kanban"
                      showIf="id &amp;&amp; isShowKanbanPerSection"/>
                <item name="perSectionCalendar" title="Per section calendar"
                      action="save,action-project-view-per-section-calendar"
                      showIf="id &amp;&amp; isShowCalendarPerSection"/>
                <item name="perUserCalendar" title="Per user calendar"
                      action="save,action-project-view-per-user-calendar"
                      showIf="id &amp;&amp; isShowCalendarPerUser"/>
            </menu>
        </menubar>
        <panel name="mainPanel">
            <panel name="detailsPanel" colSpan="12">
                <panel name="statusPanel" stacked="true" colSpan="8">
                    <field name="projectStatus" showTitle="false" widget="NavSelect" x-order="sequence"/>
                </panel>
                <field name="$viewerProjectTags" showTitle="false" colSpan="4" readonly="true">
                    <viewer depends="isBusinessProject,$toInvoiceCounter,id">
                        <![CDATA[
								<>
									<Box d="flex" justifyContent="flex-end" gap="4" alignItems="center">
										<Box>
											{isBusinessProject &&
												<Badge style={{ backgroundColor: "#FD6217" }}>
													{_t('To Invoice')} {id && <Badge style={{ backgroundColor: "#FFAA00", fontSize: "12px" }}>{$fmt('$toInvoiceCounter')}</Badge>}
												</Badge>
											}
										</Box>
										{isBusinessProject && <Badge style={{ backgroundColor: "#2185D0" }}>{_t('Business')}</Badge>}
									</Box>
								</>
							]]>
                    </viewer>
                </field>
            </panel>

            <panel name="informationPanel" colSpan="10">
                <field name="fullName" showTitle="false" colSpan="12" css="label-bold bold large">
                    <editor x-show-titles="false">
                        <panel name="seq" colSpan="3">
                            <field name="code" showTitle="false" colSpan="12" readonly="true"
                                   if="__config__.app.getApp('project')?.generateProjectSequence"
                                   css="label-bold bold large" x-bind="{{code|unaccent|uppercase}}"/>
                            <field name="code" showTitle="false" colSpan="12" required="true"
                                   if="!__config__.app.getApp('project')?.generateProjectSequence"
                                   css="label-bold bold large" x-bind="{{code|unaccent|uppercase}}"/>
                        </panel>
                        <field name="name" showTitle="false" colSpan="6" required="true"
                               css="label-bold bold large"/>
                    </editor>
                </field>
            </panel>
        </panel>
        <panel name="detailsPanel">
            <panel name="generalInfoPanel" colSpan="12">
                <field name="company" form-view="company-form" grid-view="company-grid" colSpan="3"
                       canEdit="false" if-module="axelor-business-project" hidden="true"/>
                <field name="clientPartner"
                       domain="self.isCustomer = true AND :company member of self.companySet"
                       onChange="action-project-method-get-partner-data" requiredIf="isBusinessProject"
                       form-view="partner-form" grid-view="partner-grid" colSpan="3"
                       if="__config__.app.isApp('business-project')" if-module="axelor-business-project"
                       showIf="isBusinessProject"/>
                <field name="currency" colSpan="3" if="__config__.app.isApp('business-project')"
                       if-module="axelor-business-project" showIf="isBusinessProject" canEdit="false"/>
                <field name="priceList" colSpan="3" if="__config__.app.isApp('business-project')"
                       if-module="axelor-business-project" showIf="isBusinessProject" canEdit="false"/>
                <field name="contactPartner" onSelect="action-attrs-domain-on-contact-partner"
                       form-view="partner-form" grid-view="partner-grid" colSpan="6"
                       if="__config__.app.isApp('business-project')" if-module="axelor-business-project"
                       showIf="isBusinessProject"/>
                <field name="customerAddress" grid-view="address-grid" form-view="address-form"
                       if="__config__.app.isApp('business-project')" if-module="axelor-business-project"
                       showIf="isBusinessProject"
                       domain="self IN (SELECT address FROM PartnerAddress where partner = :clientPartner)"/>
            </panel>
            <field name="description" colSpan="12" widget="html"/>
            <field name="siteSet" colSpan="12" grid-view="site-project-grid" form-view="site-form"
                   if="__config__.app.getApp('base')?.enableSiteManagementForProject"
                   domain="self.isUsableOnProject = true"/>
        </panel>

        <panel-tabs name="mainPanelTab">
            <panel title="Task Tree" name="taskTreePanel">
                <button name="addTaskBtn" title="New task" colSpan="2" css="btn-custom text-left"
                        icon="fa-plus" onClick="save,action-project-add-task"/>
                <button name="addTicketBtn" title="New ticket" colSpan="2" css="btn-custom text-left"
                        icon="fa-plus" onClick="save,action-project-add-ticket"
                        if-module="axelor-business-support" if="__config__.app.isApp('business-support')"/>
                <button name="allTaskBtn" title="All tasks" colSpan="2" css="btn-custom text-left"
                        icon="fa-tasks" onClick="save,action-project-view-show-related-tasks"/>
                <panel-dashlet name="projectTaskTreeDashletPanel" title="Task Tree"
                               colSpan="12" action="action-view-show-project-task-tree2"/>
                <panel-dashlet name="taskInvoicingDashletPanel" title="Task Invoicing"
                               colSpan="12" showIf="isBusinessProject"
                               action="action-dashlet-project-show-all-invoicing-task"
                               if="__config__.app.isApp('business-project')" canSearch="true"/>
            </panel>
            <panel title="Members" name="membersPanel">
                <field name="team" title="Team" readonlyIf="synchronize || extendsMembersFromParent"
                       colSpan="6" canNew="false" canEdit="false"/>
                <field name="synchronize" readonlyIf="extendsMembersFromParent" colSpan="2"
                       widget="boolean-switch"/>
                <field name="extendsMembersFromParent" hidden="true" colSpan="3"
                       widget="boolean-switch"/>
                <field name="membersUserSet" colSpan="12" widget="TagSelect" canNew="false"
                       form-view="user-form" grid-view="user-grid"/>
                <button name="importMemberBtn" title="Import all members" showIf="team != null"
                        readonlyIf="extendsMembersFromParent" colSpan="3"
                        onClick="action-project-method-import-members"/>
            </panel>
            <panel title="Planning" name="planningPanel" colSpan="12"
                   hideIf="!isShowPlanning || !id" if="__config__.app.isApp('employee')"
                   if-module="axelor-human-resource">
                <panel-dashlet name="projectPlanningTimePanel" title="Planned Time Planning"
                               x-show-bars="true" action="action-project-dashlet-project-planning-time" colSpan="12"
                               canSearch="true"/>
            </panel>
            <panel title="HoldBacks" name="projectHoldBacksPanel">
                <panel-related name="holdBackLineListPanel" field="projectHoldBackLineList"
                               title="HoldBacks lines" colSpan="12" form-view="project-hold-back-line-form"
                               grid-view="project-hold-back-line-grid" editable="true"/>
            </panel>
            <panel title="Log Times" name="logTimesPanel" if="__config__.app.isApp('timesheet')"
                   if-module="axelor-human-resource" showIf="isShowTimeSpent">
                <panel-dashlet name="validatedTimesheetsPanel"
                               if="__config__.app.getApp('timesheet')?.needValidation"
                               action="action-project-dashlet-validated-timesheet-lines"
                               title="Validated Timesheet lines" colSpan="12" canSearch="true"/>
                <panel-dashlet name="waitingTimesheetLinesPanel"
                               if="__config__.app.getApp('timesheet')?.needValidation"
                               action="action-project-dashlet-project-waiting-timesheet-lines"
                               title="Waiting Timesheet lines" colSpan="12" canSearch="true"/>
                <panel-dashlet name="allTimesheetsLinesPanel"
                               if="!__config__.app.getApp('timesheet')?.needValidation"
                               action="action-project-dashlet-project-all-timesheet-lines"
                               title="TimesheetLine.timeSpent" colSpan="12" canSearch="true"
                               help="To create new timespent lines, you need to do it via project task or via the HR &quot;Complete my Timesheet&quot; menu."/>
            </panel>
            <panel title="Sales" name="salesPanel" showIf="isBusinessProject"
                   if="__config__.app.isApp('business-project')
				&amp;&amp; __config__.app.getApp('business-project').getShowSaleOrderLineRelatedToProject()"
                   if-module="axelor-business-project">
                <button name="generateQuotationBtn" title="Generate quotation"
                        onClick="action-project-method-generate-quotation" css="btn-custom text-left"/>
                <button name="showSaleOrderLinesBtn" title="Show sale order lines" css="btn-custom"
                        icon="fa-line-chart" onClick="action-project-view-show-sale-order-lines"/>
                <panel-dashlet name="saleQuotationPanel"
                               action="action-project-dashlet-sale-quotation" colSpan="12" canSearch="true"/>
                <panel-dashlet name="saleOrderPanel"
                               action="action-project-dashlet-sale-order" colSpan="12" canSearch="true"/>
                <button name="selectNewSOLinesBtn" title="Select new lines"
                        css="btn-custom text-left"
                        onClick="save,action-project-attrs-sales-order-line-select-lines"
                        hideIf="$popup() || $readonly()" colSpan="3"/>
                <button name="manageSOLinesBtn" title="Manage lines" css="btn-custom text-left"
                        onClick="save,action-project-attrs-sales-order-line-manage-lines"
                        hideIf="$popup() || $readonly()" colSpan="3"/>
                <field name="$salesOrderLineSet" hidden="true" type="many-to-many" widget="TagSelect"
                       title="Sale order lines" colSpan="12" target="com.axelor.apps.sale.db.SaleOrderLine"
                       canEdit="false" canNew="false" grid-view="sale-order-line-project-grid"
                       form-view="sale-order-line-form"/>
                <button-group name="SOLinesBtnGroup" colSpan="4">
                    <button name="addSelectedSOLinesBtn" hidden="true" title="Add selected lines"
                            onClick="action-sale-order-line-method-set-project"/>
                    <button name="unlinkSelectedSOLinesBtn" hidden="true" title="Unlink selected lines"
                            onClick="action-validate-unset-project,action-sale-order-line-method-unset-project"/>
                </button-group>
                <button name="cancelManageSOLinesBtn" colSpan="4" hidden="true" title="Cancel"
                        onClick="action-project-attrs-sales-order-line-cancel-manage-lines"/>
                <panel-dashlet name="saleOrderLinePanel"
                               action="action-project-view-show-confirmed-sale-order-lines" colSpan="12"
                               canSearch="true"/>
                <panel-dashlet name="customerDeliveriesPanel"
                               action="action-project-dashlet-customer-deliveries" colSpan="12"/>
            </panel>
            <panel title="Purchases" name="purchasesPanel" showIf="isBusinessProject"
                   if="__config__.app.isApp('business-project')
					&amp;&amp; __config__.app.getApp('business-project').getShowPurchaseOrderLineRelatedToProject()"
                   if-module="axelor-business-project">
                <button name="generatePurchaseQuotationBtn" title="Generate quotation"
                        onClick="action-project-method-generate-purchase-quotation" css="btn-custom text-left"/>
                <button name="showPurchaseOrderLinesBtn" title="Show purchase order lines"
                        css="btn-custom" icon="fa-shopping-cart"
                        onClick="action-project-view-show-purchase-order-lines"/>
                <panel-dashlet name="purchaseQuotationPanel"
                               action="action-project-project-purchase-quotation" colSpan="12" canSearch="true"/>
                <panel-dashlet name="purchaseOrderPanel"
                               action="action-project-dashlet-purchase-order" colSpan="12" canSearch="true"/>
                <button name="selectNewPOLinesBtn" title="Select new lines"
                        css="btn-custom text-left"
                        onClick="save,action-project-attrs-purchase-order-line-select-lines"
                        hideIf="$popup() || $readonly()" colSpan="3"/>
                <button name="managePOLinesBtn" title="Manage lines" css="btn-custom text-left"
                        onClick="save,action-project-attrs-purchase-order-line-manage-lines"
                        hideIf="$popup() || $readonly()" colSpan="3"/>
                <field name="$purchaseOrderLineSet" hidden="true" type="many-to-many"
                       widget="TagSelect" title="Purchase order lines" colSpan="12"
                       target="com.axelor.apps.purchase.db.PurchaseOrderLine" canEdit="false" canNew="false"
                       grid-view="purchase-order-line-project-grid" form-view="purchase-order-line-form"/>
                <button-group name="POLinesBtnGroup" colSpan="4">
                    <button name="addSelectedPOLinesBtn" hidden="true" title="Add selected lines"
                            onClick="action-purchase-order-line-method-set-project"/>
                    <button name="unlinkSelectedPOLinesBtn" hidden="true" title="Unlink selected lines"
                            onClick="action-validate-unset-project,action-purchase-order-line-method-unset-project"/>
                </button-group>
                <button name="cancelManagePOLinesBtn" colSpan="4" hidden="true" title="Cancel"
                        onClick="action-project-attrs-purchase-order-line-cancel-manage-lines"/>
                <panel-dashlet name="purchaseOrderLinePanel"
                               action="action-project-view-show-confirmed-purchase-order-lines" colSpan="12"
                               canSearch="true"/>
                <panel-dashlet name="supplierArrivalsPanel"
                               action="action-project-dashlet-supplier-arrivals" colSpan="12"/>
            </panel>
            <panel name="resourceBookingListPanel" title="Resource booking"
                   if="__config__.app.getApp('project')?.resourceManagement">
                <panel-related name="resourceBookingListPanel" field="resourceBookingList"
                               form-view="resource-booking-form" grid-view="resource-booking-grid-incl-project"
                               colSpan="12"/>
            </panel>
            <panel title="Expenses" name="expensesPanel" showIf="isBusinessProject"
                   if="__config__.app.isApp('business-project')
				&amp;&amp;  __config__.app.getApp('business-project').getShowExpenseLineRelatedToProject()"
                   if-module="axelor-business-project">
                <button name="showExpenseLinesBtn" title="Show expense lines"
                        css="btn-custom text-left" icon="fa-credit-card"
                        onClick="action-project-view-show-expense-lines"/>
                <panel-dashlet name="expenseWaitingPanel"
                               action="action-project-dashlet-expense-waiting" colSpan="12" canSearch="true"/>
                <panel-dashlet name="expensePanel"
                               action="action-project-dashlet-expense-validated" colSpan="12" canSearch="true"/>
                <button name="selectNewExpenseLinesBtn" title="Select new lines"
                        css="btn-custom text-left" onClick="save,action-project-attrs-expense-line-select-lines"
                        hideIf="$popup() || $readonly()" colSpan="3"/>
                <button name="manageExpenseLinesBtn" title="Manage lines" css="btn-custom text-left"
                        onClick="save,action-project-attrs-expense-line-manage-lines"
                        hideIf="$popup() || $readonly()" colSpan="3"/>
                <field name="$expenseLineSet" hidden="true" type="many-to-many" widget="TagSelect"
                       title="Expense lines" colSpan="12" target="com.axelor.apps.hr.db.ExpenseLine"
                       canEdit="false" canNew="false" grid-view="expense-line-project-grid"
                       form-view="expense-line-form"/>
                <button-group name="expenseLinesBtnGroup" colSpan="4">
                    <button name="addSelectedExpenseLinesBtn" hidden="true" title="Add selected lines"
                            onClick="action-expense-line-method-set-project"/>
                    <button name="unlinkSelectedExpenseLinesBtn" hidden="true"
                            title="Unlink selected lines"
                            onClick="action-validate-unset-project,action-expense-line-method-unset-project"/>
                </button-group>
                <button name="cancelManageExpenseLinesBtn" colSpan="4" hidden="true" title="Cancel"
                        onClick="action-project-attrs-expense-line-cancel-manage-lines"/>
                <panel-dashlet name="expenseLinePanel"
                               action="action-project-view-show-validated-expense-lines" colSpan="12" canSearch="true"/>
            </panel>
            <panel title="Production" name="productionPanel" showIf="isBusinessProject"
                   if-module="axelor-business-production"
                   if="__config__.app.isApp('business-project')
				 &amp;&amp; __config__.app.getApp('business-project').getShowProductionOrderRelatedToProject()">
                <button name="showProductionOrdersBtn" title="Show production orders"
                        css="btn-custom text-left" icon="fa-cogs"
                        onClick="action-project-view-show-production-orders"/>
                <panel-related colSpan="12" field="productionOrderList" canSelect="true"
                               canNew="false" canEdit="false" canSearch="true" name="productionOrderList"/>
            </panel>
            <panel title="Invoicing" name="invoicingPanel" showIf="isBusinessProject"
                   if="__config__.app.isApp('business-project')" if-module="axelor-business-project">
                <help colSpan="12">
                    <![CDATA[To be invoiceable, each element (task, timesheet, expenses, etc.) has to be set with the checkbox "To invoice" as True. These boolean buttons below will set newly created element with "To invoice" as True.]]></help>
                <field name="toInvoice" colSpan="3"
                       onChange="action-project-attrs-set-invoicing-sequence"/>
                <field name="isInvoicingTimesheet" colSpan="3" showIf="isShowTimeSpent"/>
                <field name="isInvoicingExpenses" colSpan="3"/>
                <field name="isInvoicingPurchases" colSpan="3"/>
                <field name="invoicingSequenceSelect" showIf="toInvoice" requiredIf="toInvoice"
                       selection-in="[1,2]" colSpan="6"/>
                <field name="consolidatePhaseWhenInvoicing"
                       title="Consolidate sub project when invoicing" colSpan="4"/>
                <spacer name="invoicingSequenceSelectSpacer" colSpan="2"/>
                <button name="showInvoicingProjectsBtn" title="Create invoicing project"
                        css="btn-custom" icon="fa-file-text-o"
                        onClick="save,action-project-view-show-invoicing-projects"/>
                <field name="invoicingComment" colSpan="12"/>
                <panel-related name="manualElementListPanel" colSpan="12"
                               field="manualElementList" form-view="manual-element-form"
                               grid-view="manual-element-grid"/>
                <panel-dashlet name="allinvoicingProjectsPanel"
                               action="action-dashlet-project-show-all-invoicing-project" colSpan="12"/>
                <panel-dashlet name="customerInvoicePanel"
                               action="action-project-dashlet-customer-invoices" colSpan="12"
                               if="__config__.app.getApp('business-project').getShowSaleInvoiceLineRelatedToProject()"
                               canSearch="true"/>
                <button name="selectNewCustomerInvoiceLinesBtn" title="Select new lines"
                        css="btn-custom text-left"
                        onClick="save,action-project-attrs-customer-invoice-line-select-lines"
                        hideIf="$popup() || $readonly()" colSpan="3"
                        if="__config__.app.getApp('business-project').getShowSaleInvoiceLineRelatedToProject()"/>
                <button name="manageCustomerInvoiceLinesBtn" title="Manage lines"
                        css="btn-custom text-left"
                        onClick="save,action-project-attrs-customer-invoice-line-manage-lines"
                        hideIf="$popup() || $readonly()" colSpan="3"
                        if="__config__.app.getApp('business-project').getShowSaleInvoiceLineRelatedToProject()"/>
                <field name="$customerInvoiceLineSet" hidden="true" type="many-to-many"
                       widget="TagSelect" title="Customer Invoice lines" colSpan="12"
                       target="com.axelor.apps.account.db.InvoiceLine" canEdit="false" canNew="false"
                       grid-view="invoice-line-project-grid" form-view="invoice-line-form"/>
                <button-group name="customerInvoiceLinesBtnGroup" colSpan="4">
                    <button name="addSelectedCustomerInvoiceLinesBtn" hidden="true"
                            title="Add selected lines"
                            onClick="action-invoice-line-method-set-customer-invoice-line-project"/>
                    <button name="unlinkSelectedCustomerInvoiceLinesBtn" hidden="true"
                            title="Unlink selected lines"
                            onClick="action-validate-unset-project,action-invoice-line-method-unset-customer-invoice-line-project"/>
                </button-group>
                <button name="cancelManageCustomerInvoiceLinesBtn" colSpan="4" hidden="true"
                        title="Cancel" onClick="action-project-attrs-customer-invoice-line-cancel-manage-lines"/>
                <panel-dashlet name="customerInvoiceLinePanel"
                               action="action-project-view-show-sale-invoice-lines" colSpan="12"
                               if="__config__.app.getApp('business-project').getShowSaleInvoiceLineRelatedToProject()"
                               canSearch="true"/>
                <panel-dashlet name="supplierInvoicePanel"
                               action="action-project-dashlet-supplier-invoices" colSpan="12"
                               if="__config__.app.getApp('business-project').getShowPurchaseInvoiceLineRelatedToProject()"
                               canSearch="true"/>
                <button name="selectNewSupplierInvoiceLinesBtn" title="Select new lines"
                        css="btn-custom text-left"
                        onClick="save,action-project-attrs-supplier-invoice-line-select-lines"
                        hideIf="$popup() || $readonly()" colSpan="3"
                        if="__config__.app.getApp('business-project').getShowPurchaseInvoiceLineRelatedToProject()"/>
                <button name="manageSupplierInvoiceLinesBtn" title="Manage lines"
                        css="btn-custom text-left"
                        onClick="save,action-project-attrs-supplier-invoice-line-manage-lines"
                        hideIf="$popup() || $readonly()" colSpan="3"
                        if="__config__.app.getApp('business-project').getShowPurchaseInvoiceLineRelatedToProject()"/>
                <field name="$supplierInvoiceLineSet" hidden="true" type="many-to-many"
                       widget="TagSelect" title="Supplier Invoice lines" colSpan="12"
                       target="com.axelor.apps.account.db.InvoiceLine" canEdit="false" canNew="false"
                       grid-view="invoice-line-project-grid" form-view="invoice-line-form"/>
                <button-group name="supplierInvoiceLinesBtnGroup" colSpan="4">
                    <button name="addSelectedSupplierInvoiceLinesBtn" hidden="true"
                            title="Add selected lines"
                            onClick="action-invoice-line-method-set-supplier-invoice-line-project"/>
                    <button name="unlinkSelectedSupplierInvoiceLinesBtn" hidden="true"
                            title="Unlink selected lines"
                            onClick="action-validate-unset-project,action-invoice-line-method-unset-supplier-invoice-line-project"/>
                </button-group>
                <button name="cancelManageSupplierInvoiceLinesBtn" colSpan="4" hidden="true"
                        title="Cancel" onClick="action-project-attrs-supplier-invoice-line-cancel-manage-lines"/>
                <panel-dashlet name="supplierInvoiceLinePanel"
                               action="action-project-view-show-purchase-invoice-lines" colSpan="12"
                               if="__config__.app.getApp('business-project').getShowPurchaseInvoiceLineRelatedToProject()"
                               canSearch="true"/>
                <panel-dashlet name="advancePaymentInvoicesDashletPanel"
                               action="action-project-dashlet-advance-payment-invoices" colSpan="12"
                               if="__config__.app.getApp('business-project').getShowPurchaseInvoiceLineRelatedToProject() || __config__.app.getApp('business-project').getShowSaleInvoiceLineRelatedToProject()"
                               canSearch="true"/>
            </panel>
            <panel title="Analytic" name="analyticPanel" showIf="isBusinessProject"
                   if="__config__.app.isApp('business-project')" if-module="axelor-business-project">
                <panel-dashlet name="analyticDashletPanel"
                               action="action-project-dashlet-analytic-move-lines" colSpan="12"/>
            </panel>
            <panel title="Wiki" name="wikiPanel">
                <panel-related name="wikiListPanel" field="wikiList" colSpan="12"
                               form-view="wiki-form" grid-view="wiki-grid-incl-project"/>
            </panel>
            <panel title="Roadmap" name="roadmapPanel" if-module="axelor-business-support"
                   if="__config__.app.isApp('business-support')">
                <panel-related name="roadmapSetPanel" field="roadmapSet" colSpan="12"
                               form-view="project-version-form">
                    <field name="title"/>
                    <field name="projectStatus"/>
                    <field name="testingServerDate"/>
                    <field name="productionServerDate"/>
                </panel-related>
            </panel>
            <panel name="announcementPanel" title="Announcement" if-module="axelor-business-support"
                   if="__config__.app.isApp('business-support')">
                <panel-related name="announcementListPanel" field="announcementList"
                               colSpan="12" form-view="project-announcement-form">
                    <field name="title"/>
                    <field name="date"/>
                    <field name="content"/>
                </panel-related>
            </panel>
            <panel title="Configurations" name="configurationsPanel">
                <field if="__config__.app.isApp('employee')" if-module="axelor-human-resource"
                       name="productSet" colSpan="12" widget="TagSelect" canEdit="false"
                       domain="self.isActivity = true AND self.dtype = 'Product'"
                       form-view="product-activity-form" grid-view="product-activity-grid"/>
                <field name="projectFolderSet" colSpan="12" widget="TagSelect"
                       if="__config__.app.isApp('business-project')" if-module="axelor-business-project"/>
                <field name="projectTimeUnit"/>
                <field name="excludeTimesheetEditor" if="__config__.app.isApp('timesheet')"
                       if-module="axelor-human-resource"/>
                <field name="childProjectList" hidden="true"/>
                <field name="sequence" hidden="true"/>
                <field name="imputable" colSpan="4" widget="boolean-switch"
                       if="__config__.app.isApp('employee') &amp;&amp; __config__.app.isApp('timesheet')"
                       if-module="axelor-human-resource"
                       onChange="action-project-record-reset-value-is-show-timespent,action-project-record-is-show-timespent-reset-values"/>
                <panel name="fieldsToDisplay" title="Fields to display" colSpan="12">
                    <field name="isShowStatus" widget="inline-checkbox"
                           onChange="action-project-record-status-reset-values"/>
                    <!--Completed task status-->
                    <field name="completedTaskStatus" grid-view="task-status-grid"
                           form-view="task-status-form" showIf="isShowStatus" requiredIf="isShowStatus"
                           onSelect="action-project-attrs-set-completed-task-status-domain"/>
                    <!--Type of authorized status-->
                    <field name="projectTaskStatusSet" widget="TagSelect" colSpan="12"
                           showIf="isShowStatus" requiredIf="isShowStatus"
                           onChange="action-project-record-reset-completed-task-status"/>

                    <field name="isShowPriority" colSpan="4" widget="inline-checkbox"
                           onChange="action-project-record-priority-reset-values"/>
                    <!--Type of authorized priorities-->
                    <field name="projectTaskPrioritySet" widget="TagSelect" colSpan="12"
                           showIf="isShowPriority" requiredIf="isShowPriority"/>
                    <spacer colSpan="12" showIf="isShowPriority"/>
                    <field name="isShowTaskCategory" colSpan="4" widget="inline-checkbox"
                           onChange="action-project-record-category-reset-values"/>
                    <field name="projectTaskCategorySet" colSpan="12" widget="TagSelect"
                           showIf="isShowTaskCategory"/>
                    <field name="isShowProgress" colSpan="4" widget="inline-checkbox"/>
                    <field name="isShowPlanning" colSpan="4" widget="inline-checkbox"/>
                    <field name="isShowFrequency" colSpan="4" widget="inline-checkbox"/>
                    <field name="isShowTimeSpent" colSpan="4" widget="inline-checkbox"
                           onChange="action-project-record-is-show-timespent-reset-values"
                           if="__config__.app.isApp('timesheet')" readonlyIf="!imputable"/>
                    <field name="isShowSection" colSpan="4" widget="inline-checkbox"
                           onChange="action-project-record-section-reset-values"/>
                    <field name="isShowTopic" colSpan="4" widget="inline-checkbox"/>
                    <field name="isShowGantt" colSpan="4" widget="inline-checkbox"/>
                    <field name="isShowKanbanPerStatus" colSpan="4" widget="inline-checkbox"
                           showIf="isShowStatus"/>
                    <field name="isShowKanbanPerSection" colSpan="4" widget="inline-checkbox"
                           showIf="isShowSection"/>
                    <field name="isShowCalendarPerStatus" colSpan="4" widget="inline-checkbox"/>
                    <field name="isShowCalendarPerSection" colSpan="4" widget="inline-checkbox"
                           showIf="isShowSection"/>
                    <field name="isShowCalendarPerUser" colSpan="4" widget="inline-checkbox"/>
                </panel>
            </panel>
            <panel title="Contracts" name="contractPanel" showIf="isBusinessProject"
                   if="__config__.app.isApp('business-project')" if-module="axelor-business-project">
                <button name="createNewCustomerContract" title="Create new customer contract"
                        colSpan="6" onClick="save,action-project-view-create-new-customer-contract"/>
                <button name="createNewSupplierContract" title="Create new supplier contract"
                        colSpan="6" onClick="save,action-project-view-create-new-supplier-contract"/>
                <panel-dashlet name="customerContractPanel" title="Customer contracts"
                               action="action-project-dashlet-customer-contracts" colSpan="12" canSearch="true"/>
                <panel-dashlet name="supplierContractPanel" title="Supplier contracts"
                               action="action-project-dashlet-supplier-contracts" colSpan="12" canSearch="true"/>
                <panel-dashlet name="contractInvoicePanel" title="Invoices"
                               action="action-project-dashlet-contract-invoices" colSpan="12"/>
            </panel>
            <panel title="Custom fields" name="customFieldConfigPanel">
                <panel-related field="taskCustomFieldsList" colSpan="12" showIf="id"
                               form-view="project-task-meta-json-field-form" grid-view="project-meta-json-field-grid"/>
            </panel>
            <panel title="Activities" name="activityPanel"
                   onTabSelect="action-project-activity-dashboard-method-on-new" showIf="id">
                <panel-include view="project-activity-dashboard-form"/>
            </panel>
        </panel-tabs>
        <panel name="attrsPanel">
            <field name="attrs" colSpan="12"/>
        </panel>
        <panel name="actionsPanel" colSpan="2" sidebar="true">
            <button name="finishBtn" title="Finish" colSpan="12" icon="fa-check"
                    showIf="!projectStatus.isCompleted" onClick="action-project-group-finish-project"
                    hidden="true"/>
            <button name="cancelBtn" title="Cancel" colSpan="12" css="btn-danger"
                    hideIf="projectStatus.id == $canceledProjectStatusId" icon="fa-times-circle"
                    onClick="action-project-group-status-canceled"/>
            <button name="resetBtn" title="Reset" hidden="true"
                    showIf="projectStatus.id == $canceledProjectStatusId" colSpan="12" css="btn-danger"
                    icon="fa-file" onClick="action-project-record-status-new,save"/>
            <field name="projectStatus.isCompleted" hidden="true"/>
        </panel>
        <panel name="characteristicsPanel" title="Characteristics" colSpan="12" sidebar="true"
               canCollapse="true" collapseIf="true">
            <panel name="configPanel" colSpan="12">
                <field if="__config__.app.isApp('business-project')"
                       if-module="axelor-business-project" name="isBusinessProject" colSpan="6"
                       widget="boolean-switch"/>
                <field name="isShowPhasesElements" colSpan="12" widget="boolean-switch"/>
                <field if="__config__.app.isApp('business-project')"
                       if-module="axelor-business-project" name="$toInvoiceCounter" showTitle="false"
                       type="integer" hidden="true" colSpan="6"/>
            </panel>
            <panel name="projectPanel" colSpan="12">
                <field name="parentProject" canEdit="false" form-view="project-form"
                       grid-view="project-grid" onSelect="action-project-attrs-set-parent-project-domain"/>
                <spacer name="childProjectSpacer" colSpan="6"/>
                <field name="childProjectList" readonly="true" colSpan="12" form-view="project-form"
                       grid-view="project-child-grid" showIf="isShowPhasesElements"/>
            </panel>
        </panel>
        <panel name="followUpPanel" colSpan="12" title="Follow-up" sidebar="true"
               canCollapse="true" collapseIf="true">
            <field name="assignedTo" title="Assigned to" canNew="false" canView="false"
                   canEdit="false" onChange="action-attrs-project-add-member" form-view="user-form"
                   grid-view="user-grid"/>
        </panel>
        <panel name="datePanel" title="Dates" colSpan="12" sidebar="true" collapseIf="true" canCollapse="true">
            <field name="fromDate" colSpan="6"/>
            <field name="toDate" colSpan="6"/>
        </panel>
        <panel-mail name="mailPanel">
            <mail-messages limit="4"/>
            <mail-followers/>
        </panel-mail>
    </form>

    <grid name="pbp.project-grid" title="Projects" model="com.axelor.apps.project.db.Project"
          orderBy="projectStatus, name">
        <menubar>
            <menu name="projectToolsMenu" title="Tools" icon="fa-wrench" showTitle="true">
                <item name="ganttWithUserItem" title="Gantt with user"
                      action="action-project-open-popup-select-users"/>
                <item name="ganttWithProjectItem" title="Gantt with project"
                      action="action-project-open-popup-select-projects"/>
            </menu>
        </menubar>
        <field name="name"/>
        <field name="projectTaskList" title="Tasks Count"/>
        <field name="assignedTo"/>
        <field name="fromDate"/>
        <field name="toDate"/>
        <field name="imputable" width="90"/>
        <field name="parentProject"/>
        <button name="openGanttBtn" title="Gantt" icon="fa-tasks"
                onClick="action-project-open-gantt"/>
        <field name="projectStatus"/>
    </grid>


    <action-attrs name="pbp.project.o-n.set-default-value.a-a">
        <attribute for="completedTaskStatus" name="value" expr="eval: __repo__(TaskStatus).find(3)" />
        <attribute for="projectTaskStatusSet" name="value" expr="eval: __repo__(TaskStatus).all().fetch()" />
        <attribute for="projectTaskPrioritySet" name="value" expr="eval: __repo__(ProjectPriority).all().fetch()" />
        <attribute for="projectTaskCategorySet" name="value" expr="eval: __repo__(ProjectTaskCategory).all().fetch()" />
    </action-attrs>

</object-views>
